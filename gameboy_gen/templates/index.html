<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><title>GooseJumper Game Gen</title>
<style>
  body { margin: 0; display: flex; height: 100vh; font-family: 'Courier New', monospace; background: #222; color: #fff; }
  #left-window { width: 40%; padding: 20px; border-right: 2px solid #555; display: flex; flex-direction: column; background: #1e1e1e; }
  textarea { flex-grow: 1; background: #333; color: #0f0; border: 1px solid #555; padding: 10px; font-size: 16px; resize: none; outline: none; }
  button { margin-top: 20px; padding: 15px; background: #007acc; color: white; border: none; cursor: pointer; font-size: 18px; font-weight: bold; }
  button:hover { background: #005f9e; }
  button:disabled { background: #555; cursor: wait; }
  #right-window { width: 60%; background: #0f380f; display: flex; justify-content: center; align-items: center; position: relative; }
  iframe { width: 100%; height: 100%; border: none; }
  #loading { position: absolute; display: none; color: #9bbc0f; font-size: 24px; }
</style>
</head>
<body>
<div id="left-window">
  <h2>INPUT</h2><p>Describe your Gameboy game:</p>
  <textarea id="promptInput" placeholder="A pong game..."></textarea>
  <button id="runBtn" onclick="generateGame()">GENERATE GAME</button>
</div>
<div id="right-window">
  <div id="loading">GENERATING...</div>
  <iframe id="gameOutput"></iframe>
</div>
<script>
async function generateGame() {
  const prompt = document.getElementById('promptInput').value;
  const btn = document.getElementById('runBtn');
  const loading = document.getElementById('loading');
  const iframe = document.getElementById('gameOutput');
  if (!prompt) return alert("Type a description!");
  btn.disabled = true; btn.innerText = "THINKING..."; loading.style.display = "block"; iframe.srcdoc = "";
  try {
    const response = await fetch('/generate', {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt: prompt })
    });
    const data = await response.json();
    if (data.success) iframe.srcdoc = data.code;
    else alert("Error: " + data.error);
  } catch (err) { alert("Network Error"); } 
  finally { btn.disabled = false; btn.innerText = "GENERATE GAME"; loading.style.display = "none"; }
}
</script>
</body>
</html>
